<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: PactBroker::Index::Service
  
    &mdash; Documentation by YARD 0.9.27
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "PactBroker::Index::Service";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (S)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../PactBroker.html" title="PactBroker (module)">PactBroker</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Index.html" title="PactBroker::Index (module)">Index</a></span></span>
     &raquo; 
    <span class="title">Service</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: PactBroker::Index::Service
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">PactBroker::Index::Service</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  <dl>
      <dt>Extended by:</dt>
      <dd><span class='object_link'><a href="../Logging.html" title="PactBroker::Logging (module)">Logging</a></span>, <span class='object_link'><a href="../Repositories.html" title="PactBroker::Repositories (module)">Repositories</a></span>, <span class='object_link'><a href="../Services.html" title="PactBroker::Services (module)">Services</a></span></dd>
  </dl>
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/pact_broker/index/service.rb</dd>
  </dl>
  
</div>


  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="DEFAULT_PAGE_SIZE-constant" class="">DEFAULT_PAGE_SIZE =
          
        </dt>
        <dd><pre class="code"><span class='int'>30</span></pre></dd>
      
        <dt id="DEFAULT_PAGE_NUMBER-constant" class="">DEFAULT_PAGE_NUMBER =
          
        </dt>
        <dd><pre class="code"><span class='int'>1</span></pre></dd>
      
    </dl>
  



  
  
  <h3 class="inherited">Constants included
     from <span class='object_link'><a href="../Services.html" title="PactBroker::Services (module)">Services</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Services.html#FACTORIES-constant" title="PactBroker::Services::FACTORIES (constant)">Services::FACTORIES</a></span></p>





  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#consumer_version_tags-class_method" title="consumer_version_tags (class method)">.<strong>consumer_version_tags</strong>(pact_publication, tags_option)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>rubocop: enable Metrics/CyclomaticComplexity.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#db-class_method" title="db (class method)">.<strong>db</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_all_index_items-class_method" title="find_all_index_items (class method)">.<strong>find_all_index_items</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_index_items-class_method" title="find_index_items (class method)">.<strong>find_index_items</strong>(options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>rubocop: disable Metrics/CyclomaticComplexity rubocop: disable Metrics/MethodLength.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_index_items_for_api-class_method" title="find_index_items_for_api (class method)">.<strong>find_index_items_for_api</strong>(consumer_name: nil, provider_name: nil, page_number: nil, page_size: nil, **_ignored)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#head_pact_publications-class_method" title="head_pact_publications (class method)">.<strong>head_pact_publications</strong>(options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#latest_pact_publication_ids-class_method" title="latest_pact_publication_ids (class method)">.<strong>latest_pact_publication_ids</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#latest_pact_publications-class_method" title="latest_pact_publications (class method)">.<strong>latest_pact_publications</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#latest_verification_for_pseudo_branch-class_method" title="latest_verification_for_pseudo_branch (class method)">.<strong>latest_verification_for_pseudo_branch</strong>(pact_publication, is_overall_latest, latest_verifications_for_cv_tags, tags_option, options)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Worst.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#latest_verifications_for_consumer_version_tags-class_method" title="latest_verifications_for_consumer_version_tags (class method)">.<strong>latest_verifications_for_consumer_version_tags</strong>(options)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>eager loading the tag stuff doesn&#39;t seem to make it quicker.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pact_publication_scope-class_method" title="pact_publication_scope (class method)">.<strong>pact_publication_scope</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>This method provides data for both the OSS server side rendered index (with and without tags) and the Pactflow UI.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pact_publications_by_view-class_method" title="pact_publications_by_view (class method)">.<strong>pact_publications_by_view</strong>(query, options)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#smart_default_view-class_method" title="smart_default_view (class method)">.<strong>smart_default_view</strong>(consumer_name, provider_name)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../Repositories.html" title="PactBroker::Repositories (module)">Repositories</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Repositories.html#branch_version_repository-instance_method" title="PactBroker::Repositories#branch_version_repository (method)">branch_version_repository</a></span>, <span class='object_link'><a href="../Repositories.html#integration_repository-instance_method" title="PactBroker::Repositories#integration_repository (method)">integration_repository</a></span>, <span class='object_link'><a href="../Repositories.html#label_repository-instance_method" title="PactBroker::Repositories#label_repository (method)">label_repository</a></span>, <span class='object_link'><a href="../Repositories.html#matrix_repository-instance_method" title="PactBroker::Repositories#matrix_repository (method)">matrix_repository</a></span>, <span class='object_link'><a href="../Repositories.html#pact_repository-instance_method" title="PactBroker::Repositories#pact_repository (method)">pact_repository</a></span>, <span class='object_link'><a href="../Repositories.html#pacticipant_repository-instance_method" title="PactBroker::Repositories#pacticipant_repository (method)">pacticipant_repository</a></span>, <span class='object_link'><a href="../Repositories.html#tag_repository-instance_method" title="PactBroker::Repositories#tag_repository (method)">tag_repository</a></span>, <span class='object_link'><a href="../Repositories.html#verification_repository-instance_method" title="PactBroker::Repositories#verification_repository (method)">verification_repository</a></span>, <span class='object_link'><a href="../Repositories.html#version_repository-instance_method" title="PactBroker::Repositories#version_repository (method)">version_repository</a></span>, <span class='object_link'><a href="../Repositories.html#webhook_repository-instance_method" title="PactBroker::Repositories#webhook_repository (method)">webhook_repository</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../Services.html" title="PactBroker::Services (module)">Services</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Services.html#badge_service-instance_method" title="PactBroker::Services#badge_service (method)">badge_service</a></span>, <span class='object_link'><a href="../Services.html#branch_service-instance_method" title="PactBroker::Services#branch_service (method)">branch_service</a></span>, <span class='object_link'><a href="../Services.html#certificate_service-instance_method" title="PactBroker::Services#certificate_service (method)">certificate_service</a></span>, <span class='object_link'><a href="../Services.html#contract_service-instance_method" title="PactBroker::Services#contract_service (method)">contract_service</a></span>, <span class='object_link'><a href="../Services.html#deployed_version_service-instance_method" title="PactBroker::Services#deployed_version_service (method)">deployed_version_service</a></span>, <span class='object_link'><a href="../Services.html#environment_service-instance_method" title="PactBroker::Services#environment_service (method)">environment_service</a></span>, <span class='object_link'><a href="../Services.html#get-instance_method" title="PactBroker::Services#get (method)">get</a></span>, <span class='object_link'><a href="../Services.html#group_service-instance_method" title="PactBroker::Services#group_service (method)">group_service</a></span>, <span class='object_link'><a href="../Services.html#index_service-instance_method" title="PactBroker::Services#index_service (method)">index_service</a></span>, <span class='object_link'><a href="../Services.html#integration_service-instance_method" title="PactBroker::Services#integration_service (method)">integration_service</a></span>, <span class='object_link'><a href="../Services.html#label_service-instance_method" title="PactBroker::Services#label_service (method)">label_service</a></span>, <span class='object_link'><a href="../Services.html#matrix_service-instance_method" title="PactBroker::Services#matrix_service (method)">matrix_service</a></span>, <span class='object_link'><a href="../Services.html#metrics_service-instance_method" title="PactBroker::Services#metrics_service (method)">metrics_service</a></span>, <span class='object_link'><a href="../Services.html#pact_service-instance_method" title="PactBroker::Services#pact_service (method)">pact_service</a></span>, <span class='object_link'><a href="../Services.html#pacticipant_service-instance_method" title="PactBroker::Services#pacticipant_service (method)">pacticipant_service</a></span>, <span class='object_link'><a href="../Services.html#register_default_services-instance_method" title="PactBroker::Services#register_default_services (method)">register_default_services</a></span>, <span class='object_link'><a href="../Services.html#register_service-instance_method" title="PactBroker::Services#register_service (method)">register_service</a></span>, <span class='object_link'><a href="../Services.html#released_version_service-instance_method" title="PactBroker::Services#released_version_service (method)">released_version_service</a></span>, <span class='object_link'><a href="../Services.html#tag_service-instance_method" title="PactBroker::Services#tag_service (method)">tag_service</a></span>, <span class='object_link'><a href="../Services.html#verification_service-instance_method" title="PactBroker::Services#verification_service (method)">verification_service</a></span>, <span class='object_link'><a href="../Services.html#version_service-instance_method" title="PactBroker::Services#version_service (method)">version_service</a></span>, <span class='object_link'><a href="../Services.html#webhook_service-instance_method" title="PactBroker::Services#webhook_service (method)">webhook_service</a></span>, <span class='object_link'><a href="../Services.html#webhook_trigger_service-instance_method" title="PactBroker::Services#webhook_trigger_service (method)">webhook_trigger_service</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../Logging.html" title="PactBroker::Logging (module)">Logging</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Logging.html#included-class_method" title="PactBroker::Logging.included (method)">included</a></span>, <span class='object_link'><a href="../Logging.html#log_error-instance_method" title="PactBroker::Logging#log_error (method)">log_error</a></span>, <span class='object_link'><a href="../Logging.html#log_with_tag-instance_method" title="PactBroker::Logging#log_with_tag (method)">log_with_tag</a></span></p>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="consumer_version_tags-class_method">
  
    .<strong>consumer_version_tags</strong>(pact_publication, tags_option)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>rubocop: enable Metrics/CyclomaticComplexity</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


126
127
128
129
130
131
132
133
134</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pact_broker/index/service.rb', line 126</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_consumer_version_tags'>consumer_version_tags</span><span class='lparen'>(</span><span class='id identifier rubyid_pact_publication'>pact_publication</span><span class='comma'>,</span> <span class='id identifier rubyid_tags_option'>tags_option</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_tags_option'>tags_option</span> <span class='op'>==</span> <span class='kw'>true</span>
    <span class='id identifier rubyid_pact_publication'>pact_publication</span><span class='period'>.</span><span class='id identifier rubyid_head_pact_tags'>head_pact_tags</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_tags_option'>tags_option</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Array</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_pact_publication'>pact_publication</span><span class='period'>.</span><span class='id identifier rubyid_head_pact_tags'>head_pact_tags</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_tag'>tag</span><span class='op'>|</span> <span class='id identifier rubyid_tags_option'>tags_option</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_tag'>tag</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span><span class='rbrace'>}</span>
  <span class='kw'>else</span>
    <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="db-class_method">
  
    .<strong>db</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


171
172
173</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pact_broker/index/service.rb', line 171</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_db'>db</span>
  <span class='const'><span class='object_link'><a href="../../PactBroker.html" title="PactBroker (module)">PactBroker</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Pacts.html" title="PactBroker::Pacts (module)">Pacts</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Pacts/PactPublication.html" title="PactBroker::Pacts::PactPublication (class)">PactPublication</a></span></span><span class='period'>.</span><span class='id identifier rubyid_db'>db</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_all_index_items-class_method">
  
    .<strong>find_all_index_items</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


27
28
29
30
31</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pact_broker/index/service.rb', line 27</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_find_all_index_items'>find_all_index_items</span>
  <span class='comment'># Is there a better way to do this? Setting a page_size of nil or -1 doesn&#39;t work
</span>  <span class='comment'># If we get to 100000000000 index items, we&#39;re probably going to have bigger issues...
</span>  <span class='id identifier rubyid_find_index_items'>find_index_items</span><span class='lparen'>(</span><span class='label'>page_number:</span> <span class='int'>1</span><span class='comma'>,</span> <span class='label'>page_size:</span> <span class='int'>100000000000</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_index_items-class_method">
  
    .<strong>find_index_items</strong>(options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>rubocop: disable Metrics/CyclomaticComplexity rubocop: disable Metrics/MethodLength</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pact_broker/index/service.rb', line 61</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_find_index_items'>find_index_items</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_latest_verifications_for_cv_tags'>latest_verifications_for_cv_tags</span> <span class='op'>=</span> <span class='id identifier rubyid_latest_verifications_for_consumer_version_tags'>latest_verifications_for_consumer_version_tags</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_latest_pp_ids'>latest_pp_ids</span> <span class='op'>=</span> <span class='id identifier rubyid_latest_pact_publication_ids'>latest_pact_publication_ids</span>

  <span class='comment'># We only need to know if a webhook exists for an integration, not what its properties are
</span>  <span class='id identifier rubyid_webhooks'>webhooks</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../PactBroker.html" title="PactBroker (module)">PactBroker</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Webhooks.html" title="PactBroker::Webhooks (module)">Webhooks</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Webhooks/Webhook.html" title="PactBroker::Webhooks::Webhook (class)">Webhook</a></span></span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span><span class='lparen'>(</span><span class='symbol'>:consumer_id</span><span class='comma'>,</span> <span class='symbol'>:provider_id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_distinct'>distinct</span><span class='period'>.</span><span class='id identifier rubyid_all'>all</span>

  <span class='id identifier rubyid_pact_publication_query'>pact_publication_query</span> <span class='op'>=</span> <span class='id identifier rubyid_head_pact_publications'>head_pact_publications</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_pagination_record_count'>pagination_record_count</span> <span class='op'>=</span> <span class='id identifier rubyid_pact_publication_query'>pact_publication_query</span><span class='period'>.</span><span class='id identifier rubyid_pagination_record_count'>pagination_record_count</span>

  <span class='id identifier rubyid_pact_publications'>pact_publications</span> <span class='op'>=</span> <span class='id identifier rubyid_pact_publication_query'>pact_publication_query</span>
    <span class='period'>.</span><span class='id identifier rubyid_eager'>eager</span><span class='lparen'>(</span><span class='symbol'>:consumer</span><span class='rparen'>)</span>
    <span class='period'>.</span><span class='id identifier rubyid_eager'>eager</span><span class='lparen'>(</span><span class='symbol'>:provider</span><span class='rparen'>)</span>
    <span class='period'>.</span><span class='id identifier rubyid_eager'>eager</span><span class='lparen'>(</span><span class='label'>pact_version:</span> <span class='lbrace'>{</span> <span class='label'>latest_verification:</span> <span class='lbrace'>{</span> <span class='label'>provider_version:</span> <span class='lbracket'>[</span><span class='lbrace'>{</span> <span class='label'>current_deployed_versions:</span> <span class='symbol'>:environment</span> <span class='rbrace'>}</span><span class='comma'>,</span> <span class='lbrace'>{</span> <span class='label'>current_supported_released_versions:</span> <span class='symbol'>:environment</span> <span class='rbrace'>}</span><span class='comma'>,</span> <span class='symbol'>:branch_heads</span><span class='comma'>,</span> <span class='lbrace'>{</span> <span class='label'>tags:</span> <span class='symbol'>:head_tag</span> <span class='rbrace'>}</span> <span class='rbracket'>]</span> <span class='rbrace'>}</span> <span class='rbrace'>}</span><span class='rparen'>)</span>
    <span class='period'>.</span><span class='id identifier rubyid_eager'>eager</span><span class='lparen'>(</span><span class='label'>integration:</span> <span class='lbracket'>[</span><span class='lbrace'>{</span><span class='label'>latest_verification:</span> <span class='symbol'>:provider_version</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='symbol'>:latest_triggered_webhooks</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='period'>.</span><span class='id identifier rubyid_eager'>eager</span><span class='lparen'>(</span><span class='label'>consumer_version:</span> <span class='lbracket'>[</span><span class='lbrace'>{</span> <span class='label'>current_deployed_versions:</span> <span class='symbol'>:environment</span> <span class='rbrace'>}</span><span class='comma'>,</span> <span class='lbrace'>{</span> <span class='label'>current_supported_released_versions:</span> <span class='symbol'>:environment</span> <span class='rbrace'>}</span><span class='comma'>,</span> <span class='symbol'>:branch_heads</span><span class='comma'>,</span> <span class='lbrace'>{</span> <span class='label'>tags:</span> <span class='symbol'>:head_tag</span> <span class='rbrace'>}</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='period'>.</span><span class='id identifier rubyid_eager'>eager</span><span class='lparen'>(</span><span class='symbol'>:head_pact_publications_for_tags</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_index_items'>index_items</span> <span class='op'>=</span> <span class='id identifier rubyid_pact_publications'>pact_publications</span><span class='period'>.</span><span class='id identifier rubyid_all'>all</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span> <span class='kw'>do</span> <span class='op'>|</span> <span class='id identifier rubyid_pact_publication'>pact_publication</span> <span class='op'>|</span>
    <span class='id identifier rubyid_is_overall_latest_for_integration'>is_overall_latest_for_integration</span> <span class='op'>=</span> <span class='id identifier rubyid_latest_pp_ids'>latest_pp_ids</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_pact_publication'>pact_publication</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_latest_verification'>latest_verification</span> <span class='op'>=</span> <span class='id identifier rubyid_latest_verification_for_pseudo_branch'>latest_verification_for_pseudo_branch</span><span class='lparen'>(</span><span class='id identifier rubyid_pact_publication'>pact_publication</span><span class='comma'>,</span> <span class='id identifier rubyid_is_overall_latest_for_integration'>is_overall_latest_for_integration</span><span class='comma'>,</span> <span class='id identifier rubyid_latest_verifications_for_cv_tags'>latest_verifications_for_cv_tags</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:tags</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_webhook'>webhook</span> <span class='op'>=</span> <span class='id identifier rubyid_webhooks'>webhooks</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_wh'>wh</span><span class='op'>|</span> <span class='id identifier rubyid_wh'>wh</span><span class='period'>.</span><span class='id identifier rubyid_is_for?'>is_for?</span><span class='lparen'>(</span><span class='id identifier rubyid_pact_publication'>pact_publication</span><span class='period'>.</span><span class='id identifier rubyid_integration'>integration</span><span class='rparen'>)</span> <span class='rbrace'>}</span>

    <span class='const'><span class='object_link'><a href="../../PactBroker.html" title="PactBroker (module)">PactBroker</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Domain.html" title="PactBroker::Domain (module)">Domain</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Domain/IndexItem.html" title="PactBroker::Domain::IndexItem (class)">IndexItem</a></span></span><span class='period'>.</span><span class='id identifier rubyid_create'>create</span><span class='lparen'>(</span>
      <span class='id identifier rubyid_pact_publication'>pact_publication</span><span class='period'>.</span><span class='id identifier rubyid_consumer'>consumer</span><span class='comma'>,</span>
      <span class='id identifier rubyid_pact_publication'>pact_publication</span><span class='period'>.</span><span class='id identifier rubyid_provider'>provider</span><span class='comma'>,</span>
      <span class='id identifier rubyid_pact_publication'>pact_publication</span><span class='period'>.</span><span class='id identifier rubyid_consumer_version'>consumer_version</span><span class='comma'>,</span>
      <span class='id identifier rubyid_pact_publication'>pact_publication</span><span class='period'>.</span><span class='id identifier rubyid_to_domain_lightweight'>to_domain_lightweight</span><span class='comma'>,</span>
      <span class='id identifier rubyid_is_overall_latest_for_integration'>is_overall_latest_for_integration</span><span class='comma'>,</span>
      <span class='id identifier rubyid_latest_verification'>latest_verification</span><span class='comma'>,</span>
      <span class='id identifier rubyid_webhook'>webhook</span> <span class='op'>?</span> <span class='lbracket'>[</span><span class='id identifier rubyid_webhook'>webhook</span><span class='rbracket'>]</span><span class='op'>:</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span>
      <span class='id identifier rubyid_pact_publication'>pact_publication</span><span class='period'>.</span><span class='id identifier rubyid_integration'>integration</span><span class='period'>.</span><span class='id identifier rubyid_latest_triggered_webhooks'>latest_triggered_webhooks</span><span class='comma'>,</span>
      <span class='id identifier rubyid_consumer_version_tags'>consumer_version_tags</span><span class='lparen'>(</span><span class='id identifier rubyid_pact_publication'>pact_publication</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:tags</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_sort_by'>sort_by</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:created_at</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:name</span><span class='rparen'>)</span><span class='comma'>,</span>
      <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:tags</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_latest_verification'>latest_verification</span> <span class='op'>?</span> <span class='id identifier rubyid_latest_verification'>latest_verification</span><span class='period'>.</span><span class='id identifier rubyid_provider_version'>provider_version</span><span class='period'>.</span><span class='id identifier rubyid_tags'>tags</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:latest_for_pacticipant?</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_sort_by'>sort_by</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:created_at</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span>
      <span class='id identifier rubyid_pact_publication'>pact_publication</span><span class='period'>.</span><span class='id identifier rubyid_latest_for_branch?'>latest_for_branch?</span>
    <span class='rparen'>)</span>
  <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span>

  <span class='const'><span class='object_link'><a href="Page.html" title="PactBroker::Index::Page (class)">Page</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Page.html#initialize-instance_method" title="PactBroker::Index::Page#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_index_items'>index_items</span><span class='comma'>,</span> <span class='id identifier rubyid_pagination_record_count'>pagination_record_count</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_index_items_for_api-class_method">
  
    .<strong>find_index_items_for_api</strong>(consumer_name: nil, provider_name: nil, page_number: nil, page_size: nil, **_ignored)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pact_broker/index/service.rb', line 136</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_find_index_items_for_api'>find_index_items_for_api</span><span class='lparen'>(</span><span class='label'>consumer_name:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>provider_name:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>page_number:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>page_size:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid__ignored'>_ignored</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_latest_pp_ids'>latest_pp_ids</span> <span class='op'>=</span> <span class='id identifier rubyid_latest_pact_publication_ids'>latest_pact_publication_ids</span>
  <span class='id identifier rubyid_pact_publications'>pact_publications</span> <span class='op'>=</span> <span class='id identifier rubyid_head_pact_publications'>head_pact_publications</span><span class='lparen'>(</span><span class='label'>consumer_name:</span> <span class='id identifier rubyid_consumer_name'>consumer_name</span><span class='comma'>,</span> <span class='label'>provider_name:</span> <span class='id identifier rubyid_provider_name'>provider_name</span><span class='comma'>,</span> <span class='label'>tags:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='label'>page_number:</span> <span class='id identifier rubyid_page_number'>page_number</span><span class='comma'>,</span> <span class='label'>page_size:</span> <span class='id identifier rubyid_page_size'>page_size</span><span class='rparen'>)</span>
    <span class='period'>.</span><span class='id identifier rubyid_eager'>eager</span><span class='lparen'>(</span><span class='symbol'>:consumer</span><span class='rparen'>)</span>
    <span class='period'>.</span><span class='id identifier rubyid_eager'>eager</span><span class='lparen'>(</span><span class='symbol'>:provider</span><span class='rparen'>)</span>
    <span class='period'>.</span><span class='id identifier rubyid_eager'>eager</span><span class='lparen'>(</span><span class='label'>pact_version:</span> <span class='lbrace'>{</span> <span class='label'>latest_verification:</span> <span class='lbrace'>{</span> <span class='label'>provider_version:</span> <span class='lbracket'>[</span><span class='lbrace'>{</span> <span class='label'>current_deployed_versions:</span> <span class='symbol'>:environment</span> <span class='rbrace'>}</span><span class='comma'>,</span> <span class='lbrace'>{</span> <span class='label'>current_supported_released_versions:</span> <span class='symbol'>:environment</span> <span class='rbrace'>}</span><span class='comma'>,</span> <span class='lbrace'>{</span> <span class='label'>branch_heads:</span> <span class='symbol'>:branch_version</span> <span class='rbrace'>}</span><span class='comma'>,</span> <span class='lbrace'>{</span> <span class='label'>tags:</span> <span class='symbol'>:head_tag</span> <span class='rbrace'>}</span><span class='rbracket'>]</span><span class='rbrace'>}</span> <span class='rbrace'>}</span><span class='rparen'>)</span>
    <span class='period'>.</span><span class='id identifier rubyid_eager'>eager</span><span class='lparen'>(</span><span class='label'>consumer_version:</span> <span class='lbracket'>[</span><span class='lbrace'>{</span> <span class='label'>current_deployed_versions:</span> <span class='symbol'>:environment</span> <span class='rbrace'>}</span><span class='comma'>,</span> <span class='lbrace'>{</span> <span class='label'>current_supported_released_versions:</span> <span class='symbol'>:environment</span> <span class='rbrace'>}</span><span class='comma'>,</span> <span class='lbrace'>{</span> <span class='label'>branch_heads:</span> <span class='symbol'>:branch_version</span> <span class='rbrace'>}</span><span class='comma'>,</span> <span class='lbrace'>{</span> <span class='label'>tags:</span> <span class='symbol'>:head_tag</span> <span class='rbrace'>}</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='period'>.</span><span class='id identifier rubyid_eager'>eager</span><span class='lparen'>(</span><span class='symbol'>:head_pact_publications_for_tags</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_pact_publications'>pact_publications</span><span class='period'>.</span><span class='id identifier rubyid_all'>all</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span> <span class='kw'>do</span> <span class='op'>|</span> <span class='id identifier rubyid_pact_publication'>pact_publication</span> <span class='op'>|</span>
    <span class='id identifier rubyid_is_overall_latest_for_integration'>is_overall_latest_for_integration</span> <span class='op'>=</span> <span class='id identifier rubyid_latest_pp_ids'>latest_pp_ids</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_pact_publication'>pact_publication</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>

    <span class='const'><span class='object_link'><a href="../../PactBroker.html" title="PactBroker (module)">PactBroker</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Domain.html" title="PactBroker::Domain (module)">Domain</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Domain/IndexItem.html" title="PactBroker::Domain::IndexItem (class)">IndexItem</a></span></span><span class='period'>.</span><span class='id identifier rubyid_create'>create</span><span class='lparen'>(</span>
      <span class='id identifier rubyid_pact_publication'>pact_publication</span><span class='period'>.</span><span class='id identifier rubyid_consumer'>consumer</span><span class='comma'>,</span>
      <span class='id identifier rubyid_pact_publication'>pact_publication</span><span class='period'>.</span><span class='id identifier rubyid_provider'>provider</span><span class='comma'>,</span>
      <span class='id identifier rubyid_pact_publication'>pact_publication</span><span class='period'>.</span><span class='id identifier rubyid_consumer_version'>consumer_version</span><span class='comma'>,</span>
      <span class='id identifier rubyid_pact_publication'>pact_publication</span><span class='period'>.</span><span class='id identifier rubyid_to_domain_lightweight'>to_domain_lightweight</span><span class='comma'>,</span>
      <span class='id identifier rubyid_is_overall_latest_for_integration'>is_overall_latest_for_integration</span><span class='comma'>,</span>
      <span class='id identifier rubyid_pact_publication'>pact_publication</span><span class='period'>.</span><span class='id identifier rubyid_latest_verification'>latest_verification</span><span class='comma'>,</span>
      <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span>
      <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span>
      <span class='id identifier rubyid_pact_publication'>pact_publication</span><span class='period'>.</span><span class='id identifier rubyid_head_pact_tags'>head_pact_tags</span><span class='period'>.</span><span class='id identifier rubyid_sort_by'>sort_by</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:created_at</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:name</span><span class='rparen'>)</span><span class='comma'>,</span>
      <span class='id identifier rubyid_pact_publication'>pact_publication</span><span class='period'>.</span><span class='id identifier rubyid_latest_verification'>latest_verification</span> <span class='op'>?</span> <span class='id identifier rubyid_pact_publication'>pact_publication</span><span class='period'>.</span><span class='id identifier rubyid_latest_verification'>latest_verification</span><span class='period'>.</span><span class='id identifier rubyid_provider_version'>provider_version</span><span class='period'>.</span><span class='id identifier rubyid_tags'>tags</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:latest_for_pacticipant?</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_sort_by'>sort_by</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:created_at</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='rparen'>)</span>
  <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="head_pact_publications-class_method">
  
    .<strong>head_pact_publications</strong>(options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pact_broker/index/service.rb', line 175</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_head_pact_publications'>head_pact_publications</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_base'>base</span> <span class='op'>=</span> <span class='id identifier rubyid_base_query'>base_query</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:search</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_pacticipant_ids'>pacticipant_ids</span> <span class='op'>=</span> <span class='id identifier rubyid_pact_pacticipant_ids_by_name'>pact_pacticipant_ids_by_name</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:search</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_base'>base</span> <span class='op'>=</span> <span class='id identifier rubyid_base'>base</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../../Sequel.html" title="Sequel (module)">Sequel</a></span></span><span class='period'>.</span><span class='op'>|</span><span class='lparen'>(</span>
      <span class='lbrace'>{</span> <span class='const'><span class='object_link'><a href="../../Sequel.html" title="Sequel (module)">Sequel</a></span></span><span class='lbracket'>[</span><span class='symbol'>:pact_publications</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:consumer_id</span><span class='rbracket'>]</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_pacticipant_ids'>pacticipant_ids</span> <span class='rbrace'>}</span><span class='comma'>,</span>
      <span class='lbrace'>{</span> <span class='const'><span class='object_link'><a href="../../Sequel.html" title="Sequel (module)">Sequel</a></span></span><span class='lbracket'>[</span><span class='symbol'>:pact_publications</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:provider_id</span><span class='rbracket'>]</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_pacticipant_ids'>pacticipant_ids</span> <span class='rbrace'>}</span>
    <span class='rparen'>)</span><span class='rparen'>)</span>

    <span class='comment'># Return early if there is no pacticipant matches the input name
</span>    <span class='kw'>return</span> <span class='id identifier rubyid_base'>base</span><span class='period'>.</span><span class='id identifier rubyid_paginate'>paginate</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:page_number</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='const'><span class='object_link'><a href="#DEFAULT_PAGE_NUMBER-constant" title="PactBroker::Index::Service::DEFAULT_PAGE_NUMBER (constant)">DEFAULT_PAGE_NUMBER</a></span></span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:page_size</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='const'><span class='object_link'><a href="#DEFAULT_PAGE_SIZE-constant" title="PactBroker::Index::Service::DEFAULT_PAGE_SIZE (constant)">DEFAULT_PAGE_SIZE</a></span></span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_pacticipant_ids'>pacticipant_ids</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_ids_query'>ids_query</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:view</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_pact_publications_by_view'>pact_publications_by_view</span><span class='lparen'>(</span><span class='id identifier rubyid_base'>base</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
              <span class='kw'>else</span>
                <span class='id identifier rubyid_query_pact_publication_ids_by_tags'>query_pact_publication_ids_by_tags</span><span class='lparen'>(</span><span class='id identifier rubyid_base'>base</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:tags</span><span class='rbracket'>]</span><span class='rparen'>)</span>
              <span class='kw'>end</span>

  <span class='id identifier rubyid_select_columns_and_order'>select_columns_and_order</span><span class='lparen'>(</span><span class='id identifier rubyid_ids_query'>ids_query</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="latest_pact_publication_ids-class_method">
  
    .<strong>latest_pact_publication_ids</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


167
168
169</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pact_broker/index/service.rb', line 167</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_latest_pact_publication_ids'>latest_pact_publication_ids</span>
  <span class='const'><span class='object_link'><a href="../../PactBroker.html" title="PactBroker (module)">PactBroker</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Pacts.html" title="PactBroker::Pacts (module)">Pacts</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Pacts/PactPublication.html" title="PactBroker::Pacts::PactPublication (class)">PactPublication</a></span></span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../../Sequel.html" title="Sequel (module)">Sequel</a></span></span><span class='lbracket'>[</span><span class='symbol'>:pact_publications</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_overall_latest'>overall_latest</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:id</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="latest_pact_publications-class_method">
  
    .<strong>latest_pact_publications</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


163
164
165</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pact_broker/index/service.rb', line 163</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_latest_pact_publications'>latest_pact_publications</span>
  <span class='const'><span class='object_link'><a href="../../PactBroker.html" title="PactBroker (module)">PactBroker</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Pacts.html" title="PactBroker::Pacts (module)">Pacts</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Pacts/PactPublication.html" title="PactBroker::Pacts::PactPublication (class)">PactPublication</a></span></span><span class='period'>.</span><span class='id identifier rubyid_overall_latest'>overall_latest</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="latest_verification_for_pseudo_branch-class_method">
  
    .<strong>latest_verification_for_pseudo_branch</strong>(pact_publication, is_overall_latest, latest_verifications_for_cv_tags, tags_option, options)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Worst. Code. Ever. This needs a big rethink. TODO environments view rubocop: disable Metrics/CyclomaticComplexity</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


109
110
111
112
113
114
115
116
117
118
119
120
121
122
123</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pact_broker/index/service.rb', line 109</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_latest_verification_for_pseudo_branch'>latest_verification_for_pseudo_branch</span><span class='lparen'>(</span><span class='id identifier rubyid_pact_publication'>pact_publication</span><span class='comma'>,</span> <span class='id identifier rubyid_is_overall_latest'>is_overall_latest</span><span class='comma'>,</span> <span class='id identifier rubyid_latest_verifications_for_cv_tags'>latest_verifications_for_cv_tags</span><span class='comma'>,</span> <span class='id identifier rubyid_tags_option'>tags_option</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:view</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>branch</span><span class='tstring_end'>&quot;</span></span> <span class='op'>||</span> <span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:view</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>all</span><span class='tstring_end'>&quot;</span></span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_pact_publication'>pact_publication</span><span class='period'>.</span><span class='id identifier rubyid_consumer_version'>consumer_version</span><span class='period'>.</span><span class='id identifier rubyid_branch_heads'>branch_heads</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_pact_publication'>pact_publication</span><span class='period'>.</span><span class='id identifier rubyid_latest_verification'>latest_verification</span> <span class='op'>||</span> <span class='id identifier rubyid_pact_publication'>pact_publication</span><span class='period'>.</span><span class='id identifier rubyid_latest_verification_for_consumer_branches'>latest_verification_for_consumer_branches</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_tags_option'>tags_option</span> <span class='op'>==</span> <span class='kw'>true</span>
    <span class='id identifier rubyid_latest_verifications_for_cv_tags'>latest_verifications_for_cv_tags</span>
      <span class='period'>.</span><span class='id identifier rubyid_select'>select</span><span class='lbrace'>{</span> <span class='op'>|</span> <span class='id identifier rubyid_v'>v</span> <span class='op'>|</span> <span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_consumer_id'>consumer_id</span> <span class='op'>==</span> <span class='id identifier rubyid_pact_publication'>pact_publication</span><span class='period'>.</span><span class='id identifier rubyid_consumer_id'>consumer_id</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_provider_id'>provider_id</span> <span class='op'>==</span> <span class='id identifier rubyid_pact_publication'>pact_publication</span><span class='period'>.</span><span class='id identifier rubyid_provider_id'>provider_id</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_pact_publication'>pact_publication</span><span class='period'>.</span><span class='id identifier rubyid_head_pact_tags'>head_pact_tags</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:name</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_consumer_version_tag_name'>consumer_version_tag_name</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
      <span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_v1'>v1</span><span class='comma'>,</span> <span class='id identifier rubyid_v2'>v2</span><span class='op'>|</span> <span class='id identifier rubyid_v1'>v1</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_v2'>v2</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span> <span class='op'>||</span> <span class='lparen'>(</span><span class='id identifier rubyid_is_overall_latest'>is_overall_latest</span> <span class='op'>?</span> <span class='id identifier rubyid_pact_publication'>pact_publication</span><span class='period'>.</span><span class='id identifier rubyid_integration'>integration</span><span class='period'>.</span><span class='id identifier rubyid_latest_verification'>latest_verification</span> <span class='op'>:</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_tags_option'>tags_option</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Array</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_latest_verifications_for_cv_tags'>latest_verifications_for_cv_tags</span>
    <span class='period'>.</span><span class='id identifier rubyid_select'>select</span><span class='lbrace'>{</span> <span class='op'>|</span> <span class='id identifier rubyid_v'>v</span> <span class='op'>|</span> <span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_consumer_id'>consumer_id</span> <span class='op'>==</span> <span class='id identifier rubyid_pact_publication'>pact_publication</span><span class='period'>.</span><span class='id identifier rubyid_consumer_id'>consumer_id</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_provider_id'>provider_id</span> <span class='op'>==</span> <span class='id identifier rubyid_pact_publication'>pact_publication</span><span class='period'>.</span><span class='id identifier rubyid_provider_id'>provider_id</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_pact_publication'>pact_publication</span><span class='period'>.</span><span class='id identifier rubyid_head_pact_tags'>head_pact_tags</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:name</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_consumer_version_tag_name'>consumer_version_tag_name</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_tags_option'>tags_option</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_consumer_version_tag_name'>consumer_version_tag_name</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
    <span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_v1'>v1</span><span class='comma'>,</span> <span class='id identifier rubyid_v2'>v2</span><span class='op'>|</span> <span class='id identifier rubyid_v1'>v1</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_v2'>v2</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span>  <span class='op'>||</span> <span class='lparen'>(</span><span class='id identifier rubyid_is_overall_latest'>is_overall_latest</span> <span class='op'>?</span> <span class='id identifier rubyid_pact_publication'>pact_publication</span><span class='period'>.</span><span class='id identifier rubyid_integration'>integration</span><span class='period'>.</span><span class='id identifier rubyid_latest_verification'>latest_verification</span> <span class='op'>:</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_pact_publication'>pact_publication</span><span class='period'>.</span><span class='id identifier rubyid_integration'>integration</span><span class='period'>.</span><span class='id identifier rubyid_latest_verification'>latest_verification</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="latest_verifications_for_consumer_version_tags-class_method">
  
    .<strong>latest_verifications_for_consumer_version_tags</strong>(options)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>eager loading the tag stuff doesn&#39;t seem to make it quicker</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


213
214
215
216
217
218
219
220
221
222
223
224
225
226
227</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pact_broker/index/service.rb', line 213</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_latest_verifications_for_consumer_version_tags'>latest_verifications_for_consumer_version_tags</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='comment'># server side rendered index page with tags[]=a&amp;tags=[]b
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:tags</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Array</span><span class='rparen'>)</span>
    <span class='const'><span class='object_link'><a href="../../PactBroker.html" title="PactBroker (module)">PactBroker</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Verifications.html" title="PactBroker::Verifications (module)">Verifications</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Verifications/LatestVerificationForConsumerVersionTag.html" title="PactBroker::Verifications::LatestVerificationForConsumerVersionTag (class)">LatestVerificationForConsumerVersionTag</a></span></span>
      <span class='period'>.</span><span class='id identifier rubyid_eager'>eager</span><span class='lparen'>(</span><span class='symbol'>:provider_version</span><span class='rparen'>)</span>
      <span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>consumer_version_tag_name:</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:tags</span><span class='rbracket'>]</span><span class='rparen'>)</span>
      <span class='period'>.</span><span class='id identifier rubyid_all'>all</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:tags</span><span class='rbracket'>]</span> <span class='comment'># server side rendered index page with tags=true
</span>    <span class='const'><span class='object_link'><a href="../../PactBroker.html" title="PactBroker (module)">PactBroker</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Verifications.html" title="PactBroker::Verifications (module)">Verifications</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Verifications/LatestVerificationForConsumerVersionTag.html" title="PactBroker::Verifications::LatestVerificationForConsumerVersionTag (class)">LatestVerificationForConsumerVersionTag</a></span></span>
      <span class='period'>.</span><span class='id identifier rubyid_eager'>eager</span><span class='lparen'>(</span><span class='label'>provider_version:</span> <span class='lbracket'>[</span><span class='lbrace'>{</span> <span class='label'>current_deployed_versions:</span> <span class='symbol'>:environment</span> <span class='rbrace'>}</span><span class='comma'>,</span> <span class='lbrace'>{</span> <span class='label'>current_supported_released_versions:</span> <span class='symbol'>:environment</span> <span class='rbrace'>}</span><span class='rbracket'>]</span><span class='rparen'>)</span>
      <span class='period'>.</span><span class='id identifier rubyid_all'>all</span>
  <span class='kw'>else</span>
    <span class='kw'>nil</span> <span class='comment'># should not be used
</span>  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="pact_publication_scope-class_method">
  
    .<strong>pact_publication_scope</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>This method provides data for both the OSS server side rendered index (with and without tags) and the Pactflow UI. It really needs to be broken into to separate methods, as it&#39;s getting too messy supporting both</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


23
24
25</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pact_broker/index/service.rb', line 23</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_pact_publication_scope'>pact_publication_scope</span>
  <span class='const'><span class='object_link'><a href="../../PactBroker.html" title="PactBroker (module)">PactBroker</a></span></span><span class='period'>.</span><span class='id identifier rubyid_policy_scope!'><span class='object_link'><a href="../../PactBroker.html#policy_scope!-class_method" title="PactBroker.policy_scope! (method)">policy_scope!</a></span></span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../../PactBroker.html" title="PactBroker (module)">PactBroker</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Pacts.html" title="PactBroker::Pacts (module)">Pacts</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Pacts/PactPublication.html" title="PactBroker::Pacts::PactPublication (class)">PactPublication</a></span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="pact_publications_by_view-class_method">
  
    .<strong>pact_publications_by_view</strong>(query, options)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


198
199
200
201
202
203
204
205
206
207
208
209
210</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pact_broker/index/service.rb', line 198</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_pact_publications_by_view'>pact_publications_by_view</span><span class='lparen'>(</span><span class='id identifier rubyid_query'>query</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>case</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:view</span><span class='rbracket'>]</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>branch</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>then</span> <span class='id identifier rubyid_query'>query</span><span class='period'>.</span><span class='id identifier rubyid_latest_by_consumer_branch'>latest_by_consumer_branch</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>tag</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>then</span> <span class='id identifier rubyid_query'>query</span><span class='period'>.</span><span class='id identifier rubyid_latest_by_consumer_tag'>latest_by_consumer_tag</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>environment</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>then</span> <span class='id identifier rubyid_query'>query</span><span class='period'>.</span><span class='id identifier rubyid_in_environments'>in_environments</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_query'>query</span>
      <span class='period'>.</span><span class='id identifier rubyid_overall_latest'>overall_latest</span>
      <span class='period'>.</span><span class='id identifier rubyid_union'>union</span><span class='lparen'>(</span><span class='id identifier rubyid_query'>query</span><span class='period'>.</span><span class='id identifier rubyid_latest_by_consumer_branch'>latest_by_consumer_branch</span><span class='rparen'>)</span>
      <span class='period'>.</span><span class='id identifier rubyid_union'>union</span><span class='lparen'>(</span><span class='id identifier rubyid_query'>query</span><span class='period'>.</span><span class='id identifier rubyid_latest_by_consumer_tag'>latest_by_consumer_tag</span><span class='rparen'>)</span>
      <span class='period'>.</span><span class='id identifier rubyid_union'>union</span><span class='lparen'>(</span><span class='id identifier rubyid_query'>query</span><span class='period'>.</span><span class='id identifier rubyid_in_environments'>in_environments</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="smart_default_view-class_method">
  
    .<strong>smart_default_view</strong>(consumer_name, provider_name)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pact_broker/index/service.rb', line 33</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_smart_default_view'>smart_default_view</span><span class='lparen'>(</span><span class='id identifier rubyid_consumer_name'>consumer_name</span><span class='comma'>,</span> <span class='id identifier rubyid_provider_name'>provider_name</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_consumer'>consumer</span> <span class='op'>=</span> <span class='id identifier rubyid_pacticipant_repository'>pacticipant_repository</span><span class='period'>.</span><span class='id identifier rubyid_find_by_name'>find_by_name</span><span class='lparen'>(</span><span class='id identifier rubyid_consumer_name'>consumer_name</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_provider'>provider</span> <span class='op'>=</span> <span class='id identifier rubyid_pacticipant_repository'>pacticipant_repository</span><span class='period'>.</span><span class='id identifier rubyid_find_by_name'>find_by_name</span><span class='lparen'>(</span><span class='id identifier rubyid_provider_name'>provider_name</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_consumer'>consumer</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_provider'>provider</span>
    <span class='id identifier rubyid_pact_publications_with_branches'>pact_publications_with_branches</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../PactBroker.html" title="PactBroker (module)">PactBroker</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Pacts.html" title="PactBroker::Pacts (module)">Pacts</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Pacts/PactPublication.html" title="PactBroker::Pacts::PactPublication (class)">PactPublication</a></span></span>
                                      <span class='period'>.</span><span class='id identifier rubyid_for_consumer_name'>for_consumer_name</span><span class='lparen'>(</span><span class='id identifier rubyid_consumer_name'>consumer_name</span><span class='rparen'>)</span>
                                      <span class='period'>.</span><span class='id identifier rubyid_for_provider_name'>for_provider_name</span><span class='lparen'>(</span><span class='id identifier rubyid_provider_name'>provider_name</span><span class='rparen'>)</span>
                                      <span class='period'>.</span><span class='id identifier rubyid_join_consumer_branch_versions'>join_consumer_branch_versions</span>

    <span class='id identifier rubyid_pact_publication_with_tags'>pact_publication_with_tags</span> <span class='op'>=</span>   <span class='const'><span class='object_link'><a href="../../PactBroker.html" title="PactBroker (module)">PactBroker</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Pacts.html" title="PactBroker::Pacts (module)">Pacts</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Pacts/PactPublication.html" title="PactBroker::Pacts::PactPublication (class)">PactPublication</a></span></span>
      <span class='period'>.</span><span class='id identifier rubyid_for_consumer_name'>for_consumer_name</span><span class='lparen'>(</span><span class='id identifier rubyid_consumer_name'>consumer_name</span><span class='rparen'>)</span>
      <span class='period'>.</span><span class='id identifier rubyid_for_provider_name'>for_provider_name</span><span class='lparen'>(</span><span class='id identifier rubyid_provider_name'>provider_name</span><span class='rparen'>)</span>
      <span class='period'>.</span><span class='id identifier rubyid_join_consumer_version_tags'>join_consumer_version_tags</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_pact_publications_with_branches'>pact_publications_with_branches</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>branch</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_pact_publication_with_tags'>pact_publication_with_tags</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>tag</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>else</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>all</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='kw'>nil</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Tue Mar 22 17:40:13 2022 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.27 (ruby-2.7.5).
</div>

    </div>
  </body>
</html>