<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: PactBroker::Matrix::AggregatedRow
  
    &mdash; Documentation by YARD 0.9.27
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "PactBroker::Matrix::AggregatedRow";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (A)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../PactBroker.html" title="PactBroker (module)">PactBroker</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Matrix.html" title="PactBroker::Matrix (module)">Matrix</a></span></span>
     &raquo; 
    <span class="title">AggregatedRow</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: PactBroker::Matrix::AggregatedRow
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">PactBroker::Matrix::AggregatedRow</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  <dl>
      <dt>Extended by:</dt>
      <dd>Forwardable</dd>
  </dl>
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/pact_broker/matrix/aggregated_row.rb</dd>
  </dl>
  
</div>








  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#consumer_head_tag_names-instance_method" title="#consumer_head_tag_names (instance method)">#<strong>consumer_head_tag_names</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The list of tag names for which this pact publication is the most recent with that tag There could, however, be a later consumer version that does&#39;t have a pact (perhaps because it was deleted) that has the same tag.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(matrix_rows)  &#x21d2; AggregatedRow </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A new instance of AggregatedRow.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#latest_verification_for_pact_version-instance_method" title="#latest_verification_for_pact_version (instance method)">#<strong>latest_verification_for_pact_version</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#latest_verification_for_pseudo_branch-instance_method" title="#latest_verification_for_pseudo_branch (instance method)">#<strong>latest_verification_for_pseudo_branch</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>If this comes back nil, it won&#39;t be “cached”, but it&#39;s a reasonably quick query, so it&#39;s probably ok.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#overall_latest%3F-instance_method" title="#overall_latest? (instance method)">#<strong>overall_latest?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(matrix_rows)  &#x21d2; <tt><span class='object_link'><a href="" title="PactBroker::Matrix::AggregatedRow (class)">AggregatedRow</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a new instance of AggregatedRow.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


17
18
19
20</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pact_broker/matrix/aggregated_row.rb', line 17</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span> <span class='id identifier rubyid_matrix_rows'>matrix_rows</span>
  <span class='ivar'>@matrix_rows</span> <span class='op'>=</span> <span class='id identifier rubyid_matrix_rows'>matrix_rows</span>
  <span class='ivar'>@first_row</span> <span class='op'>=</span> <span class='id identifier rubyid_matrix_rows'>matrix_rows</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="consumer_head_tag_names-instance_method">
  
    #<strong>consumer_head_tag_names</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The list of tag names for which this pact publication is the most recent with that tag There could, however, be a later consumer version that does&#39;t have a pact (perhaps because it was deleted) that has the same tag. TODO show a warning when the data is “corrupted” as above.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


57
58
59</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pact_broker/matrix/aggregated_row.rb', line 57</span>

<span class='kw'>def</span> <span class='id identifier rubyid_consumer_head_tag_names'>consumer_head_tag_names</span>
  <span class='id identifier rubyid_matrix_rows'>matrix_rows</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:consumer_version_tag_name</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="latest_verification_for_pact_version-instance_method">
  
    #<strong>latest_verification_for_pact_version</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


47
48
49
50
51</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pact_broker/matrix/aggregated_row.rb', line 47</span>

<span class='kw'>def</span> <span class='id identifier rubyid_latest_verification_for_pact_version'>latest_verification_for_pact_version</span>
  <span class='ivar'>@latest_verificaton_for_pact_version</span> <span class='op'>||=</span> <span class='kw'>begin</span>
    <span class='id identifier rubyid_matrix_rows'>matrix_rows</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:verification</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span><span class='period'>.</span><span class='id identifier rubyid_sort_by'>sort_by</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="latest_verification_for_pseudo_branch-instance_method">
  
    #<strong>latest_verification_for_pseudo_branch</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>If this comes back nil, it won&#39;t be “cached”, but it&#39;s a reasonably quick query, so it&#39;s probably ok. The collection of pacts that belong to the same tag can be considered a pseudo branch. Find the latest verification for each pseudo branch and return the most recent. If this pact is the most recent overall, and there were no verifications found for any of the tags, then return the most recent verification</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


33
34
35
36
37
38
39
40
41
42
43
44
45</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pact_broker/matrix/aggregated_row.rb', line 33</span>

<span class='kw'>def</span> <span class='id identifier rubyid_latest_verification_for_pseudo_branch'>latest_verification_for_pseudo_branch</span>
  <span class='ivar'>@latest_verification</span> <span class='op'>||=</span> <span class='kw'>begin</span>
    <span class='id identifier rubyid_verification'>verification</span> <span class='op'>=</span> <span class='id identifier rubyid_matrix_rows'>matrix_rows</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span> <span class='kw'>do</span> <span class='op'>|</span> <span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
      <span class='id identifier rubyid_row'>row</span><span class='period'>.</span><span class='id identifier rubyid_verification'>verification</span> <span class='op'>||</span> <span class='id identifier rubyid_latest_verification_for_consumer_version_tag'>latest_verification_for_consumer_version_tag</span><span class='lparen'>(</span><span class='id identifier rubyid_row'>row</span><span class='rparen'>)</span>
    <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span><span class='period'>.</span><span class='id identifier rubyid_sort_by'>sort_by</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span>

    <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_verification'>verification</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_overall_latest?'>overall_latest?</span>
      <span class='id identifier rubyid_overall_latest_verification'>overall_latest_verification</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_verification'>verification</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="overall_latest?-instance_method">
  
    #<strong>overall_latest?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


22
23
24</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pact_broker/matrix/aggregated_row.rb', line 22</span>

<span class='kw'>def</span> <span class='id identifier rubyid_overall_latest?'>overall_latest?</span>
  <span class='op'>!</span><span class='op'>!</span><span class='id identifier rubyid_matrix_rows'>matrix_rows</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lbrace'>{</span> <span class='op'>|</span> <span class='id identifier rubyid_row'>row</span><span class='op'>|</span> <span class='id identifier rubyid_row'>row</span><span class='period'>.</span><span class='id identifier rubyid_consumer_version_tag_name'>consumer_version_tag_name</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Tue Mar 22 17:40:19 2022 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.27 (ruby-2.7.5).
</div>

    </div>
  </body>
</html>